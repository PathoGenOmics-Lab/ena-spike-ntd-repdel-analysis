rule all:
    input: "output/ena/search.csv.gz"


rule search_ena:
    conda: "envs/pydata.yaml"
    params:
        start_date = "2021-11-01",  # outbreak.info approx BA.1 start date
        end_date = "2022-08-01",    # outbreak.info approx BA.1 end date
        limit = 0,                # 0 means no record limit
        taxonomy = "2697049",       # SARS-CoV-2
        host_scientific_name = "Homo sapiens"
    output:
        multiext("output/ena/search", ".csv.gz", ".json"),
    script: "scripts/search_ena.py"

# usar tsv si no funciona el json y leerlo desde un stream o con csv.DictReader
